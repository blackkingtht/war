using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.UI;

public class PlayerInfoCtrl : MonoBehaviour {

    public PlayInfoView playInfoView;

    public static PlayerInfoCtrl Instance;
 
    // Use this for initialization
    private void Awake()
    {
        Instance = this; 
    }
    void Start () {
        
        playInfoView.myHp.text = LocalUser.Instance.MyHp.ToString();
        playInfoView.enemyHp.text = LocalUser.Instance.EnemyHp.ToString();
        playInfoView.energy.text = LocalUser.Instance.Energy.ToString();      
    }
	
	// Update is called once per frame
	void Update () {
		
	}

    public void ShowInfo(bool isLocalUser,int reward)
    {
        if (!isLocalUser)
        {
            LocalUser.Instance.MyHp = LocalUser.Instance.MyHp - 1;
            if (LocalUser.Instance.MyHp <= 0)
            {
                LocalUser.Instance.IsWin = false;
                UnityEngine.SceneManagement.SceneManager.LoadScene("GameResult");

                return;
            }
            playInfoView.myHp.text = LocalUser.Instance.MyHp.ToString();      
        }
        else
        {
            LocalUser.Instance.Energy += reward;
            LocalUser.Instance.EnemyHp = LocalUser.Instance.EnemyHp - 1;
            if (LocalUser.Instance.EnemyHp <= 0)
            {
                LocalUser.Instance.IsWin = true;
                UnityEngine.SceneManagement.SceneManager.LoadScene("GameResult");

                return;
            }
            playInfoView.enemyHp.text = LocalUser.Instance.EnemyHp.ToString();
            playInfoView.energy.text = LocalUser.Instance.Energy.ToString();
        }

    }
    public void ShowEnergy()
    {
        playInfoView.energy.text = LocalUser.Instance.Energy.ToString();
    }
}
